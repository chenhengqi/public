[root@archlinux ~]# ./test_progs -t test_profiler

[  341.584046] rcu: INFO: rcu_preempt detected stalls on CPUs/tasks:
[  341.584653] rcu:     1-...0: (5 ticks this GP) idle=3c44/1/0x4000000000000000 softirq=2086/2086 fqs=2626
[  341.584942] rcu:     (detected by 2, t=5252 jiffies, g=1725, q=41 ncpus=4)
[  341.585193] Sending NMI from CPU 2 to CPUs 1:





[  404.611927] rcu: INFO: rcu_preempt detected stalls on CPUs/tasks:
[  404.612114] rcu:     1-...0: (5 ticks this GP) idle=3c44/1/0x4000000000000000 softirq=2086/2086 fqs=9248
[  404.612267] rcu:     (detected by 2, t=21009 jiffies, g=1725, q=47 ncpus=4)
[  404.612377] Sending NMI from CPU 2 to CPUs 1:
[  404.612477] Unable to send backtrace IPI to CPU1 - perhaps it hung?
[  414.613049] rcu: rcu_preempt kthread starved for 2495 jiffies! g1725 f0x0 RCU_GP_DOING_FQS(6) ->state=0x0 ->cpu=0
[  414.613410] rcu:     Unless rcu_preempt kthread gets sufficient CPU time, OOM is now expected behavior.


[  414.613581] rcu: RCU grace-period kthread stack dump:


[  414.613807] task:rcu_preempt     state:I stack:0     pid:16    tgid:16    ppid:2      flags:0x00000800
[  414.614168] Stack : 0000000000000000 ffffffffffffffff 9000000003bf1e10 0000000000000000
[  414.614529]         0000000000000000 0000000000000000 9000000003cc1b00 0000000000000000
[  414.614687]         0000000000000002 50d411bca9d353d7 00000000000000b4 0000000000000001
[  414.614824]         9000000004355f50 0000000000000000 90000000048af398 90000001002d3d80
[  414.614960]         9000000004252000 9000000004264000 90000001002d3d08 900000010026fb40
[  414.615097]         90000000048af8c0 9000000003bf1e10 0000000100006fcd 9000000003bf873c
[  414.615231]         00000000000000b4 0000000000000000 9000000090001260 0000000100006fcd
[  414.615369]         9000000002aef4a0 0000000003800000 900000010026fb40 50d411bca9d353d7
[  414.615507]         90000001002d3d80 900000000443b7d0 9000000004252000 90000000048ac8c0
[  414.615641]         0000000000000000 9000000002ad57e4 0000000000000000 90000000048af8c0
[  414.615776]         ...
[  414.615866] Call Trace:
[  414.615976] [<9000000003bf1764>] __schedule+0x384/0xa00
[  414.616478] [<9000000003bf1e10>] schedule+0x30/0xd8
[  414.616563] [<9000000003bf873c>] schedule_timeout+0x98/0x114
[  414.616662] [<9000000002ad57e4>] rcu_gp_fqs_loop+0x594/0x704
[  414.616756] [<9000000002ad8248>] rcu_gp_kthread+0x224/0x27c
[  414.616863] [<9000000002a6a814>] kthread+0x124/0x130
[  414.616951] [<9000000002a21c48>] ret_from_kernel_thread+0xc/0xa4
[  414.617076]
[  414.617160] rcu: Stack dump where RCU GP kthread last ran:
[  414.617253] Sending NMI from CPU 2 to CPUs 0:
[  414.617450] NMI backtrace for cpu 0
[  414.617650] CPU: 0 PID: 0 Comm: swapper/0 Not tainted 6.7.0-rc2+ #20
[  414.617797] Hardware name: QEMU QEMU Virtual Machine, BIOS unknown 2/2/2022
[  414.617944] pc 9000000002a21d00 ra 9000000003beb928 tp 900000000423c000 sp 900000000423fdc0
[  414.618100] a0 0000000000000005 a1 90000000040629d8 a2 0000000000000000 a3 7fffffffffffffff
[  414.618256] a4 00000000000537c4 a5 0000000000000040 a6 0000000000000003 a7 0000000000000000
[  414.618397] t0 0000000000000000 t1 00000000000537c4 t2 0000000000000001 t3 0000000000000001
[  414.618543] t4 4000000000000000 t5 00000009b793f9ac t6 0000000000000000 t7 0000000000000000
[  414.618677] t8 0000000000000400 u0 000000000ea06798 s9 000000000e018330 s0 0000000000000004
[  414.618925] s1 900000000426af68 s2 0000000000000004 s3 0000000000000000 s4 900000000426b000
[  414.619081] s5 9000000003c60108 s6 9000000003c60108 s7 0000000000000000 s8 000000000ea06798
[  414.619256]    ra: 9000000003beb928 arch_cpu_idle+0x1c/0x34
[  414.619373]   ERA: 9000000002a21d00 __arch_cpu_idle+0x20/0x24
[  414.619503]  CRMD: 000000b0 (PLV0 -IE -DA +PG DACF=CC DACM=CC -WE)
[  414.619696]  PRMD: 00000004 (PPLV0 +PIE -PWE)
[  414.619797]  EUEN: 00000000 (-FPE -SXE -ASXE -BTE)
[  414.619915]  ECFG: 00071c1c (LIE=2-4,10-12 VS=7)
[  414.620050] ESTAT: 00001000 [INT] (IS=12 ECode=0 EsubCode=0)
[  414.620190]  PRID: 0014c010 (Loongson-64bit, Loongson-3A5000)
[  414.620333] CPU: 0 PID: 0 Comm: swapper/0 Not tainted 6.7.0-rc2+ #20
[  414.620449] Hardware name: QEMU QEMU Virtual Machine, BIOS unknown 2/2/2022
[  414.620609] Stack : 0072617764726148 0000000000000000 9000000002a23ea0 900000000423c000
[  414.620764]         900000010015fc80 900000010015fc88 0000000000000000 900000010015fdc8
[  414.620923]         900000010015fdc0 900000010015fdc0 900000010015fbf0 0000000000000001
[  414.621066]         0000000000000001 900000010015fc88 50d411bca9d353d7 9000000100270c00
[  414.621229]         0000000000000001 0000000000010003 0000000000000000 0000000000000030
[  414.621390]         0000000000000000 00000000000977a1 000000008c36c000 0000000000000000
[  414.621550]         0000000000000000 0000000000000000 90000000040bec38 9000000004264000
[  414.621706]         9000000004273cb0 900000000423fc80 0000000000000000 0000000000000000
[  414.621869]         9000000002a24348 0000000000000000 9000000002a23eb8 00007ffff22e957c
[  414.622028]         00000000000000b0 0000000000000004 0000000000000000 0000000000071c1c
[  414.622188]         ...
[  414.622248] Call Trace:
[  414.622280] [<9000000002a23eb8>] show_stack+0x5c/0x180
[  414.622436] [<9000000003be9954>] dump_stack_lvl+0x60/0x88
[  414.622545] [<9000000003bba518>] nmi_cpu_backtrace+0x15c/0x160
[  414.622663] [<9000000002a24358>] handle_backtrace+0x10/0x40
[  414.622768] [<9000000002b0a2b0>] __flush_smp_call_function_queue+0xfc/0x5d8
[  414.622872] [<9000000002a2deac>] loongson_ipi_interrupt+0x80/0xc0
[  414.622966] [<9000000002ab7824>] __handle_irq_event_percpu+0x68/0x24c
[  414.623064] [<9000000002ab7a20>] handle_irq_event_percpu+0x18/0x6c
[  414.623168] [<9000000002abdae0>] handle_percpu_irq+0x54/0x88
[  414.623277] [<9000000002ab6af8>] generic_handle_domain_irq+0x28/0x40
[  414.623398] [<9000000003385b0c>] handle_cpu_irq+0x6c/0xa8
[  414.623500] [<9000000003be9c28>] handle_loongarch_irq+0x30/0x48
[  414.623608] [<9000000003be9cc0>] do_vint+0x80/0xb4
[  414.623704] [<9000000002a21d00>] __arch_cpu_idle+0x20/0x24
[  414.623916] [<9000000003beb928>] arch_cpu_idle+0x1c/0x34
[  414.624023] [<9000000003bebaa0>] default_idle_call+0x24/0x118
[  414.624119] [<9000000002a97378>] do_idle+0xb0/0x10c
[  414.624203] [<9000000002a975e0>] cpu_startup_entry+0x30/0x38
[  414.624299] [<9000000003bec218>] kernel_init+0x0/0x110
[  414.624494] [<9000000003c006ec>] arch_post_acpi_subsys_init+0x0/0x4
[  414.624621]
