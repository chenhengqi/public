[root@archlinux ~]# ./test_progs -t verifier_map_ptr_mixing
Can't find bpf_testmod.ko kernel module: -2
WARNING! Selftests relying on bpf_testmod.ko will be skipped.
[  145.871233] CPU 3 Unable to handle kernel paging request at virtual address 000000000018e400, era == 900000000267345c, ra == ffff8000020a3c04
[  145.871674] Oops[#1]:
[  145.871850] CPU: 3 PID: 278 Comm: test_progs Not tainted 6.7.0-rc2+ #20
[  145.871969] Hardware name: QEMU QEMU Virtual Machine, BIOS unknown 2/2/2022
[  145.872127] pc 900000000267345c ra ffff8000020a3c04 tp 90000001058f0000 sp 90000001058f3ad0
[  145.872258] a0 000000000018e400 a1 90000001058f3ad8 a2 0000000000000001 a3 90000001058f3c20
[  145.872390] a4 90000001058f3c24 a5 000000000018e400 a6 0000000000000021 a7 0000000000000118
[  145.872520] t0 ffff8000020a3b6c t1 900000000267345c t2 9000000101c39a00 t3 001c222600000000
[  145.872651] t4 ffffffffffffffff t5 0000000370256070 t6 0000000000000000 t7 0000000000000000
[  145.872780] t8 0000000000037203 u0 90000001058f3a88 s9 90000001058f3b20 s0 ffff80001b3c8000
[  145.872958] s1 0000000000000001 s2 9000000101c39a00 s3 90000001058f3c20 s4 90000001058f3ae0
[  145.873097] s5 0000000000000000 s6 900000000347f4a4 s7 90000001058f3b54 s8 9000000004666980
[  145.873234]    ra: ffff8000020a3c04 bpf_prog_4ecec27f4a4ae8c7_pointers_for_lookup_hash_array+0x98/0xe4
[  145.873637]   ERA: 900000000267345c bpf_map_lookup_elem+0x0/0xc
[  145.874081]  CRMD: 000000b0 (PLV0 -IE -DA +PG DACF=CC DACM=CC -WE)
[  145.874600]  PRMD: 00000004 (PPLV0 +PIE -PWE)
[  145.874712]  EUEN: 00000003 (+FPE +SXE -ASXE -BTE)
[  145.874837]  ECFG: 00071c1c (LIE=2-4,10-12 VS=7)
[  145.874970] ESTAT: 00010000 [PIL] (IS= ECode=1 EsubCode=0)
[  145.875101]  BADV: 000000000018e400
[  145.875192]  PRID: 0014c010 (Loongson-64bit, Loongson-3A5000)
[  145.875314] Modules linked in:
[  145.875411] Process test_progs (pid: 278, threadinfo=0000000075058c36, task=00000000e751745b)
[  145.875679] Stack : 90000001058f3b58 0000000000000000 0000000000000000 90000001058f3c24
[  145.875861]         90000001058f3c20 9000000101c39a00 0000000000000001 ffff80001b3c8000
[  145.876010]         90000001058f3b80 900000000347f550 0000000000000000 90000001058f3b68
[  145.876157]         ffff80001b3c8048 9000000003d24000 90000000033dfef0 0000000000000000
[  145.876305]         0000000000000000 90000001058f3b80 0000000000000000 0000000000000001
[  145.876439]         00000021eea8fd08 0000000000000000 ffff80001b3c8000 0000000000000000
[  145.876596]         0000000000000000 8e2fa597d7dde064 ffff80001b3c8000 9000000004666980
[  145.876773]         9000000101c90000 ffff80001b3c8000 0000000000000040 9000000101c39a00
[  145.876909]         9000000101f08c00 9000000101d93a00 90000001058f3d88 0000000000000000
[  145.877077]         9000000003d24000 9000000003480784 0000000000000001 0000000000000001
[  145.877226]         ...
[  145.877320] Call Trace:
[  145.877413] [<900000000267345c>] bpf_map_lookup_elem+0x0/0xc
[  145.877801] [<ffff8000020a3c04>] bpf_prog_4ecec27f4a4ae8c7_pointers_for_lookup_hash_array+0x98/0xe4
[  145.878023] [<900000000347f550>] bpf_test_run+0x1e4/0x2f0
[  145.878133] [<9000000003480784>] bpf_prog_test_run_skb+0x314/0x67c
[  145.878310] [<900000000264cbcc>] __sys_bpf+0x514/0x26d8
[  145.878400] [<900000000264f39c>] sys_bpf+0x18/0x28
[  145.878585] [<90000000036aab68>] do_syscall+0x7c/0x94
[  145.878681] [<90000000024e1b1c>] handle_syscall+0xbc/0x158
[  145.878820]
[  145.878873] Code: 00150317  53fe67ff  57773040 <2600008c> 28c1818c  4c000180  2600008c  28c1a18c  4c000180
[  145.879098]
[  145.879344] ---[ end trace 0000000000000000 ]---
[  145.879758] Kernel panic - not syncing: Fatal exception in interrupt
[  145.880157] Kernel relocated by 0x22c0000
[  145.880264]  .text @ 0x90000000024c0000
[  145.880361]  .data @ 0x9000000003780000
[  145.880434]  .bss  @ 0x900000000453c800
[  145.880619] ---[ end Kernel panic - not syncing: Fatal exception in interrupt ]---



[root@archlinux ~]# ./test_progs -t verifier_map_ptr_mixing
Can't find bpf_testmod.ko kernel module: -2
WARNING! Selftests relying on bpf_testmod.ko will be skipped.
[   67.276533] CPU 3 Unable to handle kernel paging request at virtual address 0000000001c9ac00, era == 9000000002fb345c, ra == ffff8000020fbef8
[   67.277049] Oops[#1]:
[   67.277231] CPU: 3 PID: 276 Comm: test_progs Not tainted 6.7.0-rc2+ #20
[   67.277394] Hardware name: QEMU QEMU Virtual Machine, BIOS unknown 2/2/2022
[   67.277610] pc 9000000002fb345c ra ffff8000020fbef8 tp 90000001059ec000 sp 90000001059efad0
[   67.277777] a0 0000000001c9ac00 a1 90000001059efad8 a2 0000000000000001 a3 90000001059efc20
[   67.277954] a4 90000001059efc24 a5 0000000001c9ac00 a6 0000000000000021 a7 0000000000000118
[   67.278117] t0 ffff8000020fbe60 t1 9000000002fb345c t2 9000000101c9ed00 t3 003473bc00000000
[   67.278282] t4 ffffffffffffffff t5 00000001a0583120 t6 0000000000000000 t7 0000000000000000
[   67.278444] t8 00000000000bdc03 u0 90000001059efa88 s9 90000001059efb20 s0 ffff80001b560000
[   67.278602] s1 0000000000000001 s2 9000000101c9ed00 s3 90000001059efc20 s4 90000001059efae0
[   67.278781] s5 0000000000000000 s6 9000000003dbf4a4 s7 90000001059efb54 s8 9000000004fa6980
[   67.278977]    ra: ffff8000020fbef8 bpf_prog_4ecec27f4a4ae8c7_pointers_for_lookup_hash_array+0x98/0xe4
[   67.279384]   ERA: 9000000002fb345c bpf_map_lookup_elem+0x0/0xc
[   67.279612]  CRMD: 000000b0 (PLV0 -IE -DA +PG DACF=CC DACM=CC -WE)
[   67.280062]  PRMD: 00000004 (PPLV0 +PIE -PWE)
[   67.280153]  EUEN: 00000003 (+FPE +SXE -ASXE -BTE)
[   67.280283]  ECFG: 00071c1c (LIE=2-4,10-12 VS=7)
[   67.280412] ESTAT: 00010000 [PIL] (IS= ECode=1 EsubCode=0)
[   67.280522]  BADV: 0000000001c9ac00
[   67.280609]  PRID: 0014c010 (Loongson-64bit, Loongson-3A5000)
[   67.280720] Modules linked in:
[   67.280807] Process test_progs (pid: 276, threadinfo=(____ptrval____), task=(____ptrval____))
[   67.281025] Stack : 90000001059efb58 0000000000000000 0000000000000000 90000001059efc24
[   67.281195]         90000001059efc20 9000000101c9ed00 0000000000000001 ffff80001b560000
[   67.281326]         90000001059efb80 9000000003dbf550 0000000000000000 90000001059efb68
[   67.281451]         ffff80001b560048 9000000004664000 9000000003d1fef0 0000000000000000
[   67.281570]         0000000000000000 90000001059efb80 0000000000000000 0000000000000001
[   67.281699]         0000000fa1dac6f8 0000000000000000 ffff80001b560000 0000000000000000
[   67.281825]         0000000000000000 bbb161721f9c1a6c ffff80001b560000 9000000004fa6980
[   67.282005]         9000000101c10000 ffff80001b560000 0000000000000040 9000000101c9ed00
[   67.282155]         900000010561dc00 9000000105b06400 90000001059efd88 0000000000000000
[   67.282282]         9000000004664000 9000000003dc0784 0000000000000001 0000000000000001
[   67.282411]         ...
[   67.282482] Call Trace:
[   67.282569] [<9000000002fb345c>] bpf_map_lookup_elem+0x0/0xc
[   67.282904] [<ffff8000020fbef8>] bpf_prog_4ecec27f4a4ae8c7_pointers_for_lookup_hash_array+0x98/0xe4
[   67.283122] [<9000000003dbf550>] bpf_test_run+0x1e4/0x2f0
[   67.283230] [<9000000003dc0784>] bpf_prog_test_run_skb+0x314/0x67c
[   67.283332] [<9000000002f8cbcc>] __sys_bpf+0x514/0x26d8
[   67.283422] [<9000000002f8f39c>] sys_bpf+0x18/0x28
[   67.283511] [<9000000003feab68>] do_syscall+0x7c/0x94
[   67.283603] [<9000000002e21b1c>] handle_syscall+0xbc/0x158
[   67.283728]
[   67.283777] Code: 00150317  53fe67ff  57773040 <2600008c> 28c1818c  4c000180  2600008c  28c1a18c  4c000180
[   67.283994]
[   67.284122] ---[ end trace 0000000000000000 ]---
[   67.284367] Kernel panic - not syncing: Fatal exception in interrupt
[   67.284595] Kernel relocated by 0x2c00000
[   67.284680]  .text @ 0x9000000002e00000
[   67.284761]  .data @ 0x90000000040c0000
[   67.284866]  .bss  @ 0x9000000004e7c800
[   67.285039] ---[ end Kernel panic - not syncing: Fatal exception in interrupt ]---
